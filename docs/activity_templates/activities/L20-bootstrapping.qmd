# Bootstrapping

<!-- NOTES to instructor: -->

<!-- - I didn't put in any readings or math boxes. -->

<!-- - I recommend doing the review exercises together -->



```{r include = FALSE, message = FALSE, warning = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE, 
  warning = FALSE,
  message = FALSE,
  error = TRUE)
```


<!-- create student notes from activity in core-->

{{< include _create_student_notes.qmd >}}

```{r}
#| echo: false
#| eval: true
make_student_notes('Bootstrapping', '_L20-bootstrapping.qmd')
```

<!-- pull activity from core -->

```{r knitr-opts}
#| echo: false
#| cache: false
knitr::opts_chunk$set(eval = FALSE, echo = TRUE)
```

{{< include core/_L20-bootstrapping.qmd >}}




\
\
\
\




# Solutions


```{r eval = TRUE, echo = FALSE}
# Load the data & packages
library(tidyverse)
library(readr)
fish <- read_csv("https://Mac-STAT.github.io/data/Mercury.csv")
```





## Exercise 1: sample vs population

a. sample estimate

b. no idea (at this point at least)! we don't know the actual population slope





## Exercise 2: The rub

We only have access to a *sample* of fish, not the entire population.








## Exercise 3: CLT

0.005






## Exercise 4: Challenge


The results are all the same.
Since we sampled without replacement, we got the same sample hence the same sample estimates every time.





## Exercise 5: Resampling

a. We always get the same sample (the original 5 fish), just in a different order. Thus the mean is always the sample.

b. They differ.

c. Sampling the same fish more than once is like observing different fish with similar characteristics.










## Exercise 6: Bootstrapping


```{r eval = TRUE}
# Set the seed so we get the same results
set.seed(155)

# Build 500 bootstrap models using REsamples of size 171
fish_models_bootstrap <- mosaic::do(500)*(
  fish %>% 
    sample_n(size = 171, replace = TRUE) %>% 
    with(lm(Concen ~ Length))
)

head(fish_models_bootstrap)
```






## Exercise 7: Bootstrap results


a. `fish_model`

b. intuition

c. They are normally distributed around our original sample estimate.








## Exercise 8: Bootstrap standard errors


a. .

```{r eval = TRUE}
fish_models_bootstrap %>%
  summarize(sd(Length))
```


b. very close!


  
    
    
## Exercise 9: Looking ahead at intervals


a. Will vary. Maybe 0.0375ish to 0.07ish.



b. Will vary. For example, if we lop off the extreme 2.5% (the smallest and biggest estimates) and just keep the middle 95%:

```{r eval = TRUE}
fish_models_bootstrap %>%
  summarize(quantile(Length, 0.025), quantile(Length, 0.975))
```







## Exercise 10: Looking ahead at hypothesis testing


a. Yes. All of the lines reflect a positive association.


b. Yes. It falls entirely above 0 (a slope of 0 indicating no association).



